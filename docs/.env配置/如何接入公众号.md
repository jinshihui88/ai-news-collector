# 如何接入微信公众号

## 📋 准备工作

1. **微信公众号账号**: 需要有一个微信公众号

---

## 🔧 详细步骤

### 步骤 1: 登录微信公众号后台

1. 打开浏览器,访问 [https://mp.weixin.qq.com/](https://mp.weixin.qq.com/)
2. 使用微信扫码登录你的公众号
![](https://cdn.ziliu.online/images/2025/11/d4c3e1b8-ab5b-4721-ae78-35a1e4040060.jpg)

### 步骤 2: 提取 Token

Token 通常在 URL 参数中，直接获取即可:
1. 查看浏览器地址栏的 URL
2. 找到 `token=` 参数

**示例 URL**:
```
https://mp.weixin.qq.com/cgi-bin/home?t=home/index&lang=zh_CN&token=12345678
```

**Token**: `12345678`

![](https://cdn.ziliu.online/images/2025/11/4a6fb03a-fbbd-441d-94a8-54749fb2cfb7.jpg)


### 步骤 3: 打开开发者工具

登录成功后,按下面的快捷键打开开发者工具:

- **Windows/Linux**: `F12` 或 `Ctrl + Shift + I`
- **macOS**: `Command + Option + I`

或者右键点击页面 → 选择"检查"(Inspect)

![](https://cdn.ziliu.online/images/2025/11/b83883fd-9ca6-456f-9f51-4fbc50a20549.jpg)

### 步骤 4: 切换到 Network 标签

在开发者工具中,点击顶部的 **"Network"**(网络)标签

![](https://cdn.ziliu.online/images/2025/11/62819573-b67e-4c34-8e9b-eb9619ca53a2.jpg)

### 步骤 5: 刷新页面并找到请求

1. 确保 Network 标签已打开
2. **刷新页面** (按 `F5` 或 `Ctrl+R` / `Command+R`)
3. 等待页面加载完成,你会看到很多网络请求
   
### 步骤 6: 过滤并查找主请求

在 Network 标签的**过滤框**中输入: `cgi-bin`

这样可以过滤出微信公众号后台的 API 请求。

找到任意一个请求(比如 `home` 或其他请求),点击它。

![](https://cdn.ziliu.online/images/2025/11/c4b58e5b-78a0-4508-8f1e-264b33e76b89.jpg)

### 步骤 7: 查看请求头信息

点击某个请求后,右侧会显示详细信息:

1. 点击 **"Headers"**(请求头)标签
2. 向下滚动找到 **"Request Headers"**(请求头)部分

### 步骤 8: 复制 Cookie

在 Request Headers 中找到 **`Cookie:`** 字段:

1. 点击 `Cookie:` 后面的值
2. **右键 → "Copy value"**(复制值)
   - 或者直接选中整行文本并复制

**重要**: Cookie 很长,确保复制完整!

![](https://cdn.ziliu.online/images/2025/11/ec0835d7-8ee8-4063-ad3c-89bef9d75bc6.jpg)

---

## 💾 保存到配置文件

### 添加配置

在 `.env` 文件中配置:

```bash
WECHAT_TOKEN=你复制的token值
WECHAT_COOKIE=你复制的完整cookie值
```
---

## ⚠️ 注意事项

### 1. Token和Cookie的有效期

- Token和Cookie 通常有效期为 **7天左右**
- 过期后需要重新获取
- 程序会自动检测 token 是否过期并提示
